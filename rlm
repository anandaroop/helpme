#! /usr/bin/env ruby

require 'dotenv/load'
require 'ruby_llm'

RubyLLM.configure do |config|
  config.anthropic_api_key = ENV['ANTHROPIC_API_KEY']
end

chat = RubyLLM.chat(model: "claude-3-7-sonnet-20250219")

chat.add_message role: :system, content: <<~SYSTEM
  You are an expert user of the following command line Unix utilities:
  - ffmpeg
  - imagemagick

  Your task is to take the user's request and produce the exact
  command line invocation that will accomplish the user's goal,
  including all necessary flags and arguments.

  If you need more information from the user, state what's missing.

  Otherwise, no yapping, no markdown, no fluff. Just the command.
SYSTEM

response = chat.ask "Convert test.png to a gif no larger than 1000 pixrls, ensure sRGB"
puts response.content

